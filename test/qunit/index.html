<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>UnderscoreDeep QUnit tests</title>

	<link rel="stylesheet" href="../../bower_components/qunit/qunit/qunit.css">

	<!-- requireJS -->
	<script type="text/javascript" src="../../bower_components/requirejs/require.js"></script>

	<script type="text/javascript">

		console.log('Loading amdconfig.js');

		// first load 'amdconfig' (which is at the project root), so that the 'text' plugin route
		// is defined.
		require(['../../amdconfig'], function(undef) {

			console.log('Loading tests.json');

			// then load the tests.json file using text plugin
			// and load qunit
			require(['text!test/qunit/tests.json','../../bower_components/qunit/qunit/qunit','underscore'], function(tests, undef, undef1) {

				// only start QUnit after tests have been loaded.
				QUnit.config.autostart = false;

				var tests = JSON.parse(tests),
					tests = _.map(tests, function(t) {
						return 'tests/' + t;
					});

				console.log('Loading ' + tests.join(', '));

				// finally load the tests themselves
				require(tests, function() {
					// and run!

					// after all tests have been loaded, run each of them in the order they were defined.
					_.each(arguments, function(testcase, index) {
					    testcase();
					});

					QUnit.load();
					QUnit.start();
				});

			});

		});
	</script>

</head>
<body>
	<a href="../../index.html">Menu</a>
	<div id="qunit"></div>
	<div id="qunit-fixture"></div>
</body>
</html>
